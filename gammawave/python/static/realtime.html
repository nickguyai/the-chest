<!DOCTYPE html>
<html>
<head>
    <title>Brainwave</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="static/style.css?v=20251019">
    <meta name="theme-color" content="#151515" />
</head>
<body>
    <!-- Top Navigation -->
    <header class="topbar" id="topbar">
        <div class="brand">
            <button id="menuToggle" class="hamburger" aria-label="Jobs">‚ò∞</button>
            Brainwave
        </div>
        <div class="controls">
            <!-- Provider Segmented Control -->
            <div class="segmented-control" id="providerToggle" role="tablist" aria-label="Provider">
                <input type="radio" id="provider-gemini" name="provider" value="gemini" checked>
                <label for="provider-gemini" role="tab" aria-selected="true">Gemini</label>
                <input type="radio" id="provider-openai" name="provider" value="openai">
                <label for="provider-openai" role="tab" aria-selected="false">OpenAI</label>
            </div>
        </div>
        <div class="actions">
            <button id="searchToggle" class="search-toggle" aria-label="Search">üîç</button>
            <div id="connectionStatus" class="connection-status" title="Connection status"></div>
            <button id="themeToggle" class="theme-toggle" aria-label="Toggle theme">üåô</button>
            <button id="settingsButton" class="settings-button" aria-label="Settings">‚öôÔ∏è</button>
        </div>
    </header>

    <!-- Left Jobs Sidebar -->
    <aside id="jobsPanel" class="side-panel left">
        <div class="panel-header">
            <span>Jobs</span>
            <button id="closeJobs" class="close">√ó</button>
        </div>
        <div id="jobsList" class="panel-content"></div>
    </aside>

    <!-- Right Search Sidebar -->
    <aside id="searchPanel" class="side-panel right">
        <div class="panel-header">
            <span>Search</span>
            <button id="closeSearch" class="close">√ó</button>
        </div>
        <div class="panel-content">
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="Enter keywords..." />
                <button id="searchButton">Search</button>
            </div>
            <div id="searchResults" class="search-results"></div>
        </div>
    </aside>

    <main class="container">
        <!-- Recording Controls -->
        <div id="recordingControls">
            <div id="timer" class="timer">00:00</div>
            <button id="recordButton" aria-live="polite" aria-pressed="false">Start</button>
        </div>

        <!-- Dropzone for file upload -->
        <section class="dropzone" id="dropzone">
            <input type="file" id="audioFile" accept="audio/wav,audio/wave,audio/x-wav,audio/mpeg,audio/mp3,audio/ogg,audio/flac,audio/mp4,audio/x-m4a,.m4a" hidden>
            <div class="dropzone-inner">
                <div class="dz-icon">‚¨áÔ∏è</div>
                <div class="dz-title">Drop audio file</div>
                <div class="dz-subtitle">or click to choose</div>
            </div>
            <div id="uploadStatus" class="upload-status"></div>
            <div id="progressBar" class="progress-bar" style="display: none;">
                <div class="progress-fill"></div>
            </div>
        </section>

        <!-- Transcript -->
        <section class="transcript-container">
            <textarea id="transcript" placeholder="Transcript will appear here..." aria-label="Transcript"></textarea>
            <button id="copyButton" class="copy-button" aria-label="Copy transcript">Copy</button>
        </section>

        <!-- Enhancement Mode (settings-like, not an action) -->
        <section class="enhance-mode">
            <div class="mode-label">Mode</div>
            <div class="segmented-control small" id="enhanceMode" role="tablist" aria-label="Enhance Mode">
                <input type="radio" id="mode-readability" name="enhance" value="readability" checked>
                <label for="mode-readability" role="tab" aria-selected="true">Readability</label>
                <input type="radio" id="mode-correctness" name="enhance" value="correctness">
                <label for="mode-correctness" role="tab" aria-selected="false">Correctness</label>
                <input type="radio" id="mode-ask" name="enhance" value="ask">
                <label for="mode-ask" role="tab" aria-selected="false">Ask AI</label>
            </div>
        </section>

        <!-- Enhanced Transcript -->
        <section class="enhanced-transcript-container">
            <textarea id="enhancedTranscript" placeholder="Enhanced text will appear here..." aria-label="Enhanced transcript"></textarea>
            <button id="copyEnhancedButton" class="copy-button" aria-label="Copy enhanced">Copy</button>
        </section>

        <!-- Gemini Structured Results (Hidden by default) -->
        <section id="geminiResults" class="gemini-results" style="display: none;">
            <div class="gemini-conversation-header">
                <h3>Conversation</h3>
                <button id="copyConversationButton" class="copy-button small" aria-label="Copy conversation">Copy Conversation</button>
            </div>
            <div id="conversationThread" class="conversation-thread"></div>
            <div class="result-section">
                <h3>Title</h3>
                <div id="resultTitle" class="result-content"></div>
            </div>
            <div class="result-section">
                <h3>Speech Segments</h3>
                <div id="resultSegments" class="segments-list"></div>
            </div>
            <div class="result-section">
                <h3>Summary</h3>
                <div id="resultSummary" class="result-content"></div>
            </div>
        </section>
    </main>

    <script src="static/main.js?v=20251020" defer></script>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <span id="closeModal" class="close">&times;</span>
            <h2>Settings</h2>
            <div class="settings-section">
                <h3>API Keys</h3>
                <div class="setting-item">
                    <label for="openaiKey">OpenAI API Key:</label>
                    <input type="password" id="openaiKey" placeholder="sk-...">
                </div>
                <div class="setting-item">
                    <label for="geminiKey">Google API Key:</label>
                    <input type="password" id="geminiKey" placeholder="AIza...">
                </div>
                <div class="settings-section">
                    <h3>Recording Hotkey</h3>
                    <div class="setting-item">
                        <label for="hotkeyDisplay">Start / Stop Recording</label>
                        <div class="hotkey-input-group">
                            <input type="text" id="hotkeyDisplay" readonly value="Space">
                            <div class="hotkey-actions">
                                <button type="button" id="captureHotkey" class="chip-button">Capture</button>
                                <button type="button" id="resetHotkey" class="chip-button secondary">Reset</button>
                            </div>
                        </div>
                        <p class="setting-hint" id="hotkeyHint">Press "Capture" and type the shortcut you want to use.</p>
                    </div>
                </div>
                <button id="saveSettings" class="save-button">Save Settings</button>
            </div>
        </div>
    </div>
</body>
</html>
